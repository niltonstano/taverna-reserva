ğŸ· Taverna Reserva â€” Backend E-commerce API

API de e-commerce desenvolvida com foco em arquitetura escalÃ¡vel, seguranÃ§a e boas prÃ¡ticas de backend moderno, utilizando Fastify + MongoDB + TypeScript.

O projeto simula um ambiente real de produÃ§Ã£o com autenticaÃ§Ã£o, controle de acesso, validaÃ§Ã£o rigorosa de dados e execuÃ§Ã£o em containers Docker.

ğŸ§  VisÃ£o Geral da Arquitetura

A aplicaÃ§Ã£o foi construÃ­da seguindo princÃ­pios de Clean Architecture e SOLID, com separaÃ§Ã£o clara de responsabilidades:

Controller â†’ Service â†’ Repository â†’ Database


Essa organizaÃ§Ã£o permite:

âœ” CÃ³digo desacoplado
âœ” Facilidade de manutenÃ§Ã£o
âœ” Testabilidade
âœ” EvoluÃ§Ã£o sem quebrar outras partes do sistema

ğŸ› ï¸ Stack Principal
Tecnologia	Finalidade
Node.js 24	Runtime JavaScript
Fastify	Framework HTTP de alta performance
TypeScript	Tipagem estÃ¡tica e seguranÃ§a
MongoDB + Mongoose	Banco NoSQL e modelagem de dados
Zod	ValidaÃ§Ã£o de dados de entrada
JWT	AutenticaÃ§Ã£o via token
Bcrypt	Hash seguro de senhas
Pino Logger	Logs estruturados e performÃ¡ticos
Docker & Docker Compose	Ambiente isolado e pronto para produÃ§Ã£o
ğŸ” Camada de SeguranÃ§a

A API foi projetada com mÃºltiplas camadas de proteÃ§Ã£o:

ğŸ”’ Helmet â€” ProteÃ§Ã£o de headers HTTP

ğŸš¦ Rate Limit â€” MitigaÃ§Ã£o contra brute force

ğŸ§ª ValidaÃ§Ã£o com Zod â€” Nenhum dado entra sem validaÃ§Ã£o

ğŸ”‘ AutenticaÃ§Ã£o JWT Bearer

ğŸ›¡ï¸ Controle de acesso por perfil (Admin / Customer)

ğŸ” Senhas criptografadas com Bcrypt

âš™ï¸ ValidaÃ§Ã£o de variÃ¡veis de ambiente no boot

ğŸ—ï¸ Estrutura do Projeto
src/
 â”œâ”€â”€ controllers   â†’ Camada HTTP (req/res)
 â”œâ”€â”€ services      â†’ Regras de negÃ³cio
 â”œâ”€â”€ repositories  â†’ Acesso ao banco
 â”œâ”€â”€ models        â†’ Schemas Mongoose
 â”œâ”€â”€ routes        â†’ Registro de rotas
 â”œâ”€â”€ plugins       â†’ Plugins do Fastify
 â”œâ”€â”€ events        â†’ Event Bus da aplicaÃ§Ã£o
 â”œâ”€â”€ scripts       â†’ Seeds e utilitÃ¡rios
 â””â”€â”€ utils         â†’ Helpers e tratamento de erros

ğŸ“Œ PadrÃµes Utilizados

Repository Pattern

Service Layer

Dependency Injection

Event Bus (arquitetura desacoplada)

âš™ï¸ Funcionalidades da API
ğŸ‘¤ AutenticaÃ§Ã£o

Registro de usuÃ¡rio

Login com geraÃ§Ã£o de JWT

ProteÃ§Ã£o de rotas autenticadas

ğŸ›ï¸ Produtos

CRUD de produtos (Admin)

Controle de estoque

AtivaÃ§Ã£o/DesativaÃ§Ã£o de produtos

ğŸ›’ Carrinho

Adicionar item ao carrinho

Remover item

AtualizaÃ§Ã£o automÃ¡tica de quantidades

CÃ¡lculo de total de itens e preÃ§o

ğŸ“¦ Pedidos (Checkout)

CriaÃ§Ã£o de pedido

Baixa automÃ¡tica de estoque

Cancelamento com rollback de estoque

ğŸ§‘â€ğŸ’¼ Ãrea Admin

VisualizaÃ§Ã£o de pedidos

Gerenciamento de produtos

ğŸ³ Ambiente Completo com Docker

A aplicaÃ§Ã£o roda em containers isolados:

ServiÃ§o	DescriÃ§Ã£o
taverna_api	Backend Fastify
taverna_db	MongoDB com volume persistente
taverna_web	Frontend React servido via Nginx
â–¶ï¸ Subir tudo
docker compose up -d --build


API disponÃ­vel em:

http://localhost:8080/
http://localhost:3333/api/v1

ğŸŒ± Popular o Banco (Seed)

O projeto possui um script que cria:

Admin padrÃ£o

Cliente de teste

CatÃ¡logo inicial de vinhos

docker exec -it taverna_api npx tsx src/scripts/seed-master.ts

ğŸ’» Rodando Localmente (Modo Dev)
# Instalar dependÃªncias
npm install

# Rodar em modo desenvolvimento
npm run dev

ğŸ§ª Qualidade e Confiabilidade

âœ” Tipagem forte em toda a aplicaÃ§Ã£o
âœ” ValidaÃ§Ã£o de entrada em todas as rotas
âœ” Graceful Shutdown (encerra conexÃµes com seguranÃ§a)
âœ” Uso de .lean() para otimizaÃ§Ã£o de leitura no MongoDB
âœ” Logs estruturados para rastreabilidade em produÃ§Ã£o

ğŸ“ˆ Diferenciais do Projeto

Este projeto demonstra na prÃ¡tica:

âœ” Arquitetura profissional em camadas
âœ” SeparaÃ§Ã£o clara de responsabilidades
âœ” SeguranÃ§a aplicada em mÃºltiplas camadas
âœ” Backend pronto para ambiente real
âœ” OrganizaÃ§Ã£o pensada para escala

ğŸ‘¨â€ğŸ’» Autor

Nilton Alexandre Stano
Desenvolvedor Backend

GitHub: https://github.com/niltonstano